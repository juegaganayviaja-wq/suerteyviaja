// === CORS CONFIGURACIÓN SEGURA ===
const allowedOrigins = [
  'http://localhost:5500',    // para Live Server local
  'http://localhost:3000',    // si usas otro servidor local
  'https://viajaydisfruta.onrender.com', // tu sitio en Render
  'https://juegayviaja.netlify.app'      // ✅ TU FRONTEND EN NETLIFY
];

app.use(cors({
  origin: (origin, callback) => {
    // Permitir solicitudes sin origen (como Postman o curl)
    if (!origin) return callback(null, true);
    // Verificar si el origen está en la lista permitida
    if (allowedOrigins.includes(origin)) {
      callback(null, true);
    } else {
      callback(new Error(`Origen no permitido: ${origin}`));
    }
  },
  credentials: true // importante para cookies/sesiones
}));